<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>404 NotFound / Single Page Apps for GitHub Pages</title>
    <script type="text/javascript">
      var SEGMENT_COUNT = <%=SEGMENT_COUNT%>;

      const loc = window.location
      const origin = loc.origin;  //=> https://yourname.github.io
      const path = loc.href.substr(origin.length + 1);  //=> repo-name/book/123
      const segments = path.split('/');  //=> [repo-name, book, 123]
      const repo = segments.slice(0, SEGMENT_COUNT).join('/');  //=> repo-name
      const param = segments.slice(SEGMENT_COUNT).join('/');  //=> book/123
      const url = origin + '/' + repo + "?fromgh404=/" + encodeURIComponent(param);
      loc.replace(url);
      // <%=  test %>
    </script>
  </head>
  <body>
  </body>
</html>